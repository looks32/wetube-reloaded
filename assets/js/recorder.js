(()=>{"use strict";var e={m:{},u:e=>"js/"+e+".js"};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(t=r.currentScript.src),!t)){var n=r.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=n[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t+"../"})(),e.b=document.baseURI||self.location.href;var t,r,n,i={};e.r(i),(r=t||(t={})).LOAD="LOAD",r.EXEC="EXEC",r.FFPROBE="FFPROBE",r.WRITE_FILE="WRITE_FILE",r.READ_FILE="READ_FILE",r.DELETE_FILE="DELETE_FILE",r.RENAME="RENAME",r.CREATE_DIR="CREATE_DIR",r.LIST_DIR="LIST_DIR",r.DELETE_DIR="DELETE_DIR",r.ERROR="ERROR",r.DOWNLOAD="DOWNLOAD",r.PROGRESS="PROGRESS",r.LOG="LOG",r.MOUNT="MOUNT",r.UNMOUNT="UNMOUNT",new Error("unknown message type"),new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),new Error("called FFmpeg.terminate()"),new Error("failed to import ffmpeg-core.js"),function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"}(n||(n={}));const o=document.getElementById("actionBtn"),a=document.getElementById("preview");let c,l,E;const d="recording.webm",s="output.mp4",R="thumbnail.jpg",p=(e,t)=>{const r=document.createElement("a");r.href=e,r.download=t,document.body.appendChild(r),r.click()},m=async()=>{o.removeEventListener("click",m),o.innerText="Transcoding...",o.disabled=!0;const e=(0,i.createFFmpeg)({log:!0});await e.load(),e.FS("writeFile",d,await(0,i.fetchFile)(E)),await e.run("-i",d,"-r","60",s),await e.run("-i",d,"-ss","00:00:01","-frames:v","1",R);const t=e.FS("readFile",s),r=e.FS("readFile",R),n=new Blob([t.buffer],{type:"video/mp4"}),a=new Blob([r.buffer],{type:"image/jpg"}),c=URL.createObjectURL(n),l=URL.createObjectURL(a);p(c,"MyRecording.mp4"),p(l,"MyThumbnail.jpg"),e.FS("unlink",d),e.FS("unlink",s),e.FS("unlink",R),URL.revokeObjectURL(c),URL.revokeObjectURL(l),URL.revokeObjectURL(E),o.disabled=!1,o.innerText="Record Again",o.addEventListener("click",u)},u=()=>{o.innerText="Recording",o.disabled=!0,o.removeEventListener("click",u),l=new MediaRecorder(c,{mimeType:"video/webm"}),l.ondataavailable=e=>{E=URL.createObjectURL(e.data),a.srcObject=null,a.src=E,a.loop=!0,a.play(),o.innerText="Download",o.disabled=!1,o.addEventListener("click",m)},l.start(),setTimeout((()=>{l.stop()}),5e3)};(async()=>{c=await navigator.mediaDevices.getUserMedia({audio:!1,video:{width:1024,height:576}}),a.srcObject=c,a.play()})(),o.addEventListener("click",u)})();